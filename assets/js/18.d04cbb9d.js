(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{415:function(n,t,s){"use strict";s.r(t);var a=s(33),e=Object(a.a)({},(function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"nginx搭建静态网站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx搭建静态网站"}},[n._v("#")]),n._v(" Nginx搭建静态网站")]),n._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[n._v("#")]),n._v(" 安装")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 安装 nginx")]),n._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" nginx\n")])])]),s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[n._v("#")]),n._v(" 配置")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 打开Nginx配置")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("vim")]),n._v(" /etc/nginx/nginx.conf\n")])])]),s("p",[s("strong",[n._v("修改Nginx配置文件")])]),n._v(" "),s("div",{staticClass:"language-conf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("# ...\n include /etc/nginx/conf.d/*.conf;\n\n    # 配置 80 端口\n    server {\n        listen       80 default_server;\n        listen       [::]:80 default_server;\n        server_name  _;\n        root         /root/s2-fe-dist/html;\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        # location /此处填写上下文路径 {\n        #   root 此处填写静态资源路径;\n        #   index  index.html;\n        # }\n        location / {\n          root /root/s2h5/s2h5-web-pc/;\n          index  index.html;\n        }\n\n        location /h5 {\n          root /root/s2h5/s2h5-web-h5/;\n          index  index.html;\n        }\n\n\n        location /mini {\n          root /root/s2h5/s2h5-web-mini/;\n          index  index.html;\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n    }\n\n# ...\n")])])]),s("p",[n._v("重启ngix")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 检验配置文件是否正确")]),n._v("\nnginx -t\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 重新加载配置文件")]),n._v("\nnginx -s reload\n")])])]),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[n._v("#")]),n._v(" 常见问题")]),n._v(" "),s("h3",{attrs:{id:"nginx报错-nginx-error-invalid-pid-number"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx报错-nginx-error-invalid-pid-number"}},[n._v("#")]),n._v(" Nginx报错：nginx: [error] invalid PID number")]),n._v(" "),s("p",[s("strong",[n._v("问题：")]),n._v("\n服务器重启之后，执行"),s("code",[n._v("nginx -t")]),n._v("是OK的，然而在执行"),s("code",[n._v("nginx -s reload")]),n._v(" 的时候报错\n"),s("code",[n._v('nginx: [error] invalid PID number "" in "/run/nginx.pid"')])]),n._v(" "),s("p",[s("strong",[n._v("解决方法：")])]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# nginx.conf文件的路径可以从nginx -t的返回中找到。")]),n._v("\nnginx -c /etc/nginx/nginx.conf\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 重试 重启")]),n._v("\nnginx -s reload\n\n")])])]),s("h3",{attrs:{id:"nginx报错-404"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx报错-404"}},[n._v("#")]),n._v(" Nginx报错：404")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 有可能是location后多加一个左斜杠/")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 也有可以是指向的目录地址不存在")]),n._v("\n")])])]),s("h3",{attrs:{id:"nginx报错-403-forbidden"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx报错-403-forbidden"}},[n._v("#")]),n._v(" Nginx报错：403 Forbidden")]),n._v(" "),s("p",[n._v("403 Forbidden  代表被禁止的，一般是三种情况导致的:")]),n._v(" "),s("ul",[s("li",[n._v("目录权限不足\n"),s("ul",[s("li",[s("code",[n._v("chmod -R 755 [路径]")])])])]),n._v(" "),s("li",[n._v("nginx.conf用户权限问题\n"),s("ul",[s("li",[n._v("打开配置文件"),s("code",[n._v("vim /etc/nginx/nginx.conf")]),n._v("， 把 user 用户名 改为 user root 或 其它有高权限的用户名称即可")])])]),n._v(" "),s("li",[n._v("Centos中的selinux配置未关闭\n查看SELinux状态："),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 如果SELinux status参数为enabled即为开启状态")]),n._v("\n/usr/sbin/sestatus -v \n")])])]),n._v("处理方式：\n1、临时关闭（不用重启机器）： "),s("code",[n._v("setenforce 0")]),n._v("\n2、永久关闭（要重启机器）：将配置文件"),s("code",[n._v("vim /etc/selinux/config")]),n._v("中"),s("code",[n._v("SELINUX=enforcing")]),n._v("改为"),s("code",[n._v("SELINUX=disabled")])])]),n._v(" "),s("h3",{attrs:{id:"nginx-多级目录-404"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-多级目录-404"}},[n._v("#")]),n._v(" Nginx 多级目录 404")]),n._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[n._v("\nserver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    server_name progect.google.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n \n    location /dev/ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        root /www/project"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 注意，此时走的是/www/project下边的dev目录")]),n._v("\n        index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n \n    location /pub/ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v(" /www/project/pub/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#  此时是/www/project/pub/目录")]),n._v("\n        index index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 其他路径直接返回403页面")]),n._v("\n    location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("return")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("403")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n")])])]),s("p",[s("strong",[n._v("注意")])]),n._v(" "),s("ol",[s("li",[n._v("alias：指定的目录是准确的，给location指定一个目录。")]),n._v(" "),s("li",[n._v("root 指定上级目录，并且该上级目录 一定要 含有locatoin指定名称的同名目录。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);